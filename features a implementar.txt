ğŸ“œ REPASO GENERAL â€” ESTADO DEL PROYECTO
âœ… YA IMPLEMENTADO (correcto y alineado)

Muerte de Diablo sin cinemÃ¡tica

CancelaciÃ³n del trigger de cinematic.

Permite continuar el flujo del juego.

âœ” Correcto, previsto por el engine.

âœ” Bajo riesgo estructural.

Intercambio de posiciones de NPCs del pueblo

Odgen restaurado a su lugar original.

Adria / Farnham intercambiados.

âœ” Cambio puramente de datos / coordenadas.

âœ” Sin impacto en saves ni lÃ³gica.

ğŸ‘‰ Ambos cambios no rompen invariantes del engine. Muy bien elegidos.

âš ï¸ PROBLEMA ACTUAL â€” â€œFocus / cÃ¡mara raraâ€ al morir Diablo
ğŸ” SÃ­ntoma

Al morir Diablo:

La cÃ¡mara hace un movimiento extraÃ±o / incÃ³modo

SensaciÃ³n de â€œtirÃ³nâ€ o tracking forzado

Se intentÃ³ fixear, pero no quedÃ³ estable.

ğŸ§  DiagnÃ³stico tÃ©cnico (clave)

En Diablo 1 / DevilutionX:

La cÃ¡mara NO es libre

Siempre sigue:

al player (ViewX, ViewY)

o a un evento forzado (cinematics, boss deaths)

Cuando se mata a Diablo, ocurren 3 cosas encadenadas:

M_DiabloDeath() o equivalente

Se setean flags:

fin de juego

triggers de cinematic

Se fuerza un recentrado de vista (aunque canceles la cinemÃ¡tica)

ğŸ‘‰ Vos cancelaste la cinemÃ¡tica,
âŒ pero NO el â€œcamera intentâ€ previo.

âœ… SOLUCIÃ“N PROPUESTA (limpia, segura y realista)
ğŸ¯ Objetivo

Eliminar el movimiento raro SIN romper:

lÃ³gica de muerte

estados del boss

transiciÃ³n de nivel

ğŸ”§ Estrategia correcta (no hack)

NO tocar rendering
NO tocar interpolaciÃ³n
NO tocar saves

ğŸ‘‰ Solo intervenir el momento exacto del focus

ğŸ§© Propuesta concreta

En el handler de muerte de Diablo:

Detectar muerte final

Congelar la vista al player actual

Evitar cualquier override posterior

PseudocÃ³digo conceptual (arquitectura)
if (monster._mType == MT_DIABLO && monster._mHitPoints <= 0) {
    // Congelar cÃ¡mara al player
    SetView(player.position);
    
    // Cancelar cualquier intent de cinematic focus
    DisableCinematicCamera();
}

ğŸ“ DÃ³nde mirar (archivos tÃ­picos)

monster.cpp

diablo.cpp

movie.cpp (aunque no se reproduzca)

scrollrt.cpp / view.cpp

ğŸ›¡ PrevenciÃ³n de errores

âŒ NO tocar ScrollInfo global permanentemente

âŒ NO modificar lÃ³gica de input

âŒ NO â€œhardcodearâ€ coordenadas

âœ” Solo ignorar el override de cÃ¡mara cuando Diablo muere

ğŸ‘‰ Este fix es MEDIO, no trivial, pero 100% viable
y mucho mÃ¡s sano que parchear rendering.

ğŸ§© FEATURES DISCUTIDAS Y SU ESTADO REAL

Voy a listar solo las viables, coherentes y seguras.

ğŸŸ¢ CATEGORÃA A â€” IMPLEMENTAR SIN MIEDO
1. Garantizar todas las quests

Activar QUEST_INIT en lugar de QUEST_NOTAVAIL

No forzar ejecuciÃ³n

âœ” Ultra segura

âœ” Muy poco cÃ³digo

2. Mejora de iluminaciÃ³n (soft)

Ajuste leve de _pLightRad

Clamp correcto

âœ” No afecta AI

âœ” No afecta mapas

3. Densidad decorativa leve

Uso de assets ya existentes

Solo durante DRLG

âœ” Visualmente potente

âš ï¸ Cuidar colisiones

4. Variantes de monstruos por profundidad

Stats-only

Sin flags persistentes

âœ” Diablo 1-friendly

âœ” FÃ¡cil de testear

ğŸŸ¡ CATEGORÃA B â€” IMPLEMENTAR CON LÃMITES
5. RegeneraciÃ³n controlada de monstruos

Solo niveles SIN quest activa

Nunca uniques

Nunca durante quest

âš ï¸ Requiere cuidado con reentradas

6. Mutaciones simples (stats)

Uso de flags existentes

Sin VFX ni estados nuevos

âš ï¸ Balance fino

7. Monstruos Ã©lite (muy light)

Muy baja probabilidad

Stats temporales

Sin persistencia

âš ï¸ Riesgo medio si se exagera

ğŸ”´ DESCARTADAS (con fundamento tÃ©cnico)

Estas NO conviene implementarlas ahora:

âŒ CorrupciÃ³n global del mundo
âŒ Estados persistentes post-quest
âŒ Cambios permanentes en niveles
âŒ Eventos encadenados entre partidas
âŒ Sistema de corrupciÃ³n progresiva real

ğŸ‘‰ Requieren:

saves nuevos

flags persistentes

reescritura de invariantes

No encajan con tu enfoque actual (correcto).

ğŸ§  VISIÃ“N FINAL COMO ARQUITECTO
Tu enfoque es el correcto porque:

âœ” No intentÃ¡s â€œmodernizarâ€ Diablo
âœ” No agregÃ¡s sistemas nuevos
âœ” RescatÃ¡s cÃ³digo incompleto
âœ” UsÃ¡s lo que Blizzard dejÃ³ preparado

ğŸ‘‰ Eso preserva el alma del juego
y minimiza bugs imposibles de depurar

ğŸ† PRIORIDAD REALISTA (recomendada)

Fix definitivo de cÃ¡mara en muerte de Diablo

Garantizar todas las quests

Mejora de iluminaciÃ³n

Densidad decorativa leve

Variantes de monstruos por profundidad

Eso ya da una sensaciÃ³n de versiÃ³n â€œdefinitivaâ€
sin traicionar el diseÃ±o original.

